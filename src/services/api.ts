import axios from 'axios';
import type { Pothole, Stats } from '../types/pothole';

// Default to demo data if no API is configured
const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || '';

const apiClient = axios.create({
  baseURL: API_BASE_URL,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Demo data for when no API is available - All in November 2025
const DEMO_POTHOLES: Pothole[] = [
  // Nov 1 - 8 detections
  {
    id: 'PH-2025-0001',
    lat: 43.7314,
    lng: -79.7624,
    detected_at: '2025-11-10T06:14:00Z',
    severity: 0.82,
    estimated_repair_cost_cad: 480,
    status: 'completed',
    source: 'iot-camera-queen-st',
    ward: 'Ward 1',
    road_name: 'Queen Street West',
    priority: 'high',
    description: 'Large pothole on main thoroughfare',
  },
  {
    id: 'PH-2025-0002',
    lat: 43.7523,
    lng: -79.7312,
    detected_at: '2025-11-03T09:39:00Z',
    severity: 0.65,
    estimated_repair_cost_cad: 320,
    status: 'in_progress',
    source: 'dashcam-fleet-012',
    ward: 'Ward 2',
    road_name: 'Main Street North',
    priority: 'medium',
    description: 'Medium-sized pothole near intersection',
  },
  {
    id: 'PH-2025-0003',
    lat: 43.6891,
    lng: -79.7598,
    detected_at: '2025-11-03T15:38:00Z',
    severity: 0.91,
    estimated_repair_cost_cad: 650,
    status: 'new',
    source: 'iot-camera-main-st',
    ward: 'Ward 3',
    road_name: 'Bovaird Drive East',
    priority: 'critical',
    description: 'Critical pothole causing vehicle damage',
  },
  {
    id: 'PH-2025-0004',
    lat: 43.7156,
    lng: -79.7456,
    detected_at: '2025-11-09T06:30:00Z',
    severity: 0.45,
    estimated_repair_cost_cad: 200,
    status: 'scheduled',
    source: 'iot-camera-kennedy-rd',
    ward: 'Ward 1',
    road_name: 'Kennedy Road South',
    priority: 'low',
    description: 'Minor surface damage',
  },
  {
    id: 'PH-2025-0005',
    lat: 43.7234,
    lng: -79.7123,
    detected_at: '2025-11-04T06:13:00Z',
    severity: 0.78,
    estimated_repair_cost_cad: 425,
    status: 'completed',
    source: 'dashcam-fleet-045',
    ward: 'Ward 4',
    road_name: 'Chinguacousy Road',
    priority: 'high',
    description: 'Repaired November 11, 2025',
  },
  {
    id: 'PH-2025-0006',
    lat: 43.7289,
    lng: -79.7542,
    detected_at: '2025-11-08T20:25:00Z',
    severity: 0.55,
    estimated_repair_cost_cad: 280,
    status: 'new',
    source: 'dashcam-fleet-023',
    ward: 'Ward 1',
    road_name: 'Hurontario Street',
    priority: 'medium',
    description: 'Moderate pothole near shopping center',
  },
  {
    id: 'PH-2025-0007',
    lat: 43.7412,
    lng: -79.7189,
    detected_at: '2025-11-02T09:25:00Z',
    severity: 0.38,
    estimated_repair_cost_cad: 180,
    status: 'scheduled',
    source: 'iot-camera-mclaughlin',
    ward: 'Ward 5',
    road_name: 'McLaughlin Road',
    priority: 'low',
    description: 'Small surface crack',
  },
  {
    id: 'PH-2025-0008',
    lat: 43.6978,
    lng: -79.7445,
    detected_at: '2025-11-11T21:09:00Z',
    severity: 0.88,
    estimated_repair_cost_cad: 590,
    status: 'in_progress',
    source: 'iot-camera-steeles',
    ward: 'Ward 3',
    road_name: 'Steeles Avenue East',
    priority: 'critical',
    description: 'Deep pothole near highway entrance',
  },
  {
    id: 'PH-2025-0009',
    lat: 43.7567,
    lng: -79.7678,
    detected_at: '2025-11-11T06:57:00Z',
    severity: 0.72,
    estimated_repair_cost_cad: 410,
    status: 'completed',
    source: 'dashcam-fleet-089',
    ward: 'Ward 2',
    road_name: 'Sandalwood Parkway',
    priority: 'high',
    description: 'Repaired November 10, 2025',
  },
  {
    id: 'PH-2025-0010',
    lat: 43.7098,
    lng: -79.7234,
    detected_at: '2025-11-06T17:04:00Z',
    severity: 0.42,
    estimated_repair_cost_cad: 195,
    status: 'new',
    source: 'iot-camera-bramalea',
    ward: 'Ward 4',
    road_name: 'Bramalea Road',
    priority: 'low',
    description: 'Minor pavement deterioration',
  },
  {
    id: 'PH-2025-0011',
    lat: 43.7445,
    lng: -79.7890,
    detected_at: '2025-11-01T17:53:00Z',
    severity: 0.67,
    estimated_repair_cost_cad: 350,
    status: 'scheduled',
    source: 'dashcam-fleet-034',
    ward: 'Ward 6',
    road_name: 'Airport Road',
    priority: 'medium',
    description: 'Pothole near industrial area',
  },
  {
    id: 'PH-2025-0012',
    lat: 43.7189,
    lng: -79.7567,
    detected_at: '2025-11-03T01:49:00Z',
    severity: 0.93,
    estimated_repair_cost_cad: 720,
    status: 'new',
    source: 'iot-camera-queen-st',
    ward: 'Ward 1',
    road_name: 'Queen Street East',
    priority: 'critical',
    description: 'Severe road damage affecting multiple lanes',
  },
  {
    id: 'PH-2025-0013',
    lat: 43.6845,
    lng: -79.7712,
    detected_at: '2025-11-06T20:15:00Z',
    severity: 0.51,
    estimated_repair_cost_cad: 265,
    status: 'in_progress',
    source: 'dashcam-fleet-056',
    ward: 'Ward 7',
    road_name: 'Countryside Drive',
    priority: 'medium',
    description: 'Pothole in residential area',
  },
  {
    id: 'PH-2025-0014',
    lat: 43.7634,
    lng: -79.7423,
    detected_at: '2025-11-10T06:15:00Z',
    severity: 0.36,
    estimated_repair_cost_cad: 170,
    status: 'completed',
    source: 'iot-camera-mayfield',
    ward: 'Ward 8',
    road_name: 'Mayfield Road',
    priority: 'low',
    description: 'Repaired November 5, 2025',
  },
  {
    id: 'PH-2025-0015',
    lat: 43.7356,
    lng: -79.7089,
    detected_at: '2025-11-08T09:46:00Z',
    severity: 0.79,
    estimated_repair_cost_cad: 460,
    status: 'new',
    source: 'dashcam-fleet-078',
    ward: 'Ward 9',
    road_name: 'Torbram Road',
    priority: 'high',
    description: 'Large pothole near school zone',
  },
  {
    id: 'PH-2025-0016',
    lat: 43.6923,
    lng: -79.7345,
    detected_at: '2025-11-03T18:18:00Z',
    severity: 0.48,
    estimated_repair_cost_cad: 240,
    status: 'scheduled',
    source: 'iot-camera-Clark',
    ward: 'Ward 10',
    road_name: 'Clark Boulevard',
    priority: 'medium',
    description: 'Pothole near park entrance',
  },
  {
    id: 'PH-2025-0017',
    lat: 43.7501,
    lng: -79.7256,
    detected_at: '2025-11-06T07:25:00Z',
    severity: 0.84,
    estimated_repair_cost_cad: 520,
    status: 'in_progress',
    source: 'dashcam-fleet-091',
    ward: 'Ward 5',
    road_name: 'Ray Lawson Boulevard',
    priority: 'high',
    description: 'Deep pothole near bus stop',
  },
  {
    id: 'PH-2025-0018',
    lat: 43.7123,
    lng: -79.7823,
    detected_at: '2025-11-10T05:28:00Z',
    severity: 0.41,
    estimated_repair_cost_cad: 190,
    status: 'completed',
    source: 'iot-camera-goreway',
    ward: 'Ward 6',
    road_name: 'Goreway Drive',
    priority: 'low',
    description: 'Repaired November 8, 2025',
  },
  {
    id: 'PH-2025-0019',
    lat: 43.6789,
    lng: -79.7501,
    detected_at: '2025-11-06T08:47:00Z',
    severity: 0.69,
    estimated_repair_cost_cad: 380,
    status: 'new',
    source: 'dashcam-fleet-102',
    ward: 'Ward 7',
    road_name: 'Williams Parkway',
    priority: 'medium',
    description: 'Moderate pothole near hospital',
  },
  {
    id: 'PH-2025-0020',
    lat: 43.7678,
    lng: -79.7612,
    detected_at: '2025-11-02T07:59:00Z',
    severity: 0.95,
    estimated_repair_cost_cad: 780,
    status: 'new',
    source: 'iot-camera-castlemore',
    ward: 'Ward 8',
    road_name: 'Castlemore Road',
    priority: 'critical',
    description: 'Emergency repair needed - major road damage',
  },
  {
    id: 'PH-2025-0021',
    lat: 43.7290,
    lng: -79.7410,
    detected_at: '2025-11-02T23:47:00Z',
    severity: 0.58,
    estimated_repair_cost_cad: 290,
    status: 'scheduled',
    source: 'dashcam-fleet-015',
    ward: 'Ward 1',
    road_name: 'Queen Street West',
    priority: 'medium',
    description: 'Pothole near intersection',
  },
  {
    id: 'PH-2025-0022',
    lat: 43.7456,
    lng: -79.7278,
    detected_at: '2025-11-04T10:11:00Z',
    severity: 0.73,
    estimated_repair_cost_cad: 420,
    status: 'new',
    source: 'iot-camera-main-st',
    ward: 'Ward 2',
    road_name: 'Main Street South',
    priority: 'high',
    description: 'Large pothole causing traffic issues',
  },
  {
    id: 'PH-2025-0023',
    lat: 43.6912,
    lng: -79.7523,
    detected_at: '2025-11-12T17:17:00Z',
    severity: 0.44,
    estimated_repair_cost_cad: 210,
    status: 'completed',
    source: 'dashcam-fleet-042',
    ward: 'Ward 3',
    road_name: 'Bovaird Drive West',
    priority: 'low',
    description: 'Repaired November 3, 2025',
  },
  {
    id: 'PH-2025-0024',
    lat: 43.7234,
    lng: -79.7389,
    detected_at: '2025-11-10T11:14:00Z',
    severity: 0.81,
    estimated_repair_cost_cad: 495,
    status: 'in_progress',
    source: 'iot-camera-kennedy-rd',
    ward: 'Ward 1',
    road_name: 'Kennedy Road North',
    priority: 'high',
    description: 'Deep pothole near commercial plaza',
  },
  {
    id: 'PH-2025-0025',
    lat: 43.7145,
    lng: -79.7156,
    detected_at: '2025-11-01T05:16:00Z',
    severity: 0.39,
    estimated_repair_cost_cad: 185,
    status: 'new',
    source: 'dashcam-fleet-067',
    ward: 'Ward 4',
    road_name: 'Chinguacousy Road North',
    priority: 'low',
    description: 'Minor surface damage',
  },
  {
    id: 'PH-2025-0026',
    lat: 43.7367,
    lng: -79.7512,
    detected_at: '2025-11-07T02:18:00Z',
    severity: 0.76,
    estimated_repair_cost_cad: 445,
    status: 'scheduled',
    source: 'iot-camera-hurontario',
    ward: 'Ward 1',
    road_name: 'Hurontario Street North',
    priority: 'high',
    description: 'Pothole near transit station',
  },
  {
    id: 'PH-2025-0027',
    lat: 43.7489,
    lng: -79.7201,
    detected_at: '2025-11-12T18:42:00Z',
    severity: 0.52,
    estimated_repair_cost_cad: 270,
    status: 'completed',
    source: 'dashcam-fleet-083',
    ward: 'Ward 5',
    road_name: 'McLaughlin Road South',
    priority: 'medium',
    description: 'Repaired November 6, 2025',
  },
  {
    id: 'PH-2025-0028',
    lat: 43.6945,
    lng: -79.7467,
    detected_at: '2025-11-01T16:23:00Z',
    severity: 0.87,
    estimated_repair_cost_cad: 580,
    status: 'new',
    source: 'iot-camera-steeles',
    ward: 'Ward 3',
    road_name: 'Steeles Avenue West',
    priority: 'critical',
    description: 'Critical pothole near school',
  },
  {
    id: 'PH-2025-0029',
    lat: 43.7612,
    lng: -79.7645,
    detected_at: '2025-11-02T04:52:00Z',
    severity: 0.63,
    estimated_repair_cost_cad: 340,
    status: 'in_progress',
    source: 'dashcam-fleet-094',
    ward: 'Ward 2',
    road_name: 'Sandalwood Parkway East',
    priority: 'medium',
    description: 'Pothole repair in progress',
  },
  {
    id: 'PH-2025-0030',
    lat: 43.7078,
    lng: -79.7289,
    detected_at: '2025-11-12T02:56:00Z',
    severity: 0.47,
    estimated_repair_cost_cad: 235,
    status: 'scheduled',
    source: 'iot-camera-bramalea',
    ward: 'Ward 4',
    road_name: 'Bramalea Road South',
    priority: 'low',
    description: 'Scheduled for repair next week',
  },
  {
    id: 'PH-2025-0031',
    lat: 43.7523,
    lng: -79.7834,
    detected_at: '2025-11-11T03:14:00Z',
    severity: 0.92,
    estimated_repair_cost_cad: 710,
    status: 'new',
    source: 'dashcam-fleet-029',
    ward: 'Ward 6',
    road_name: 'Airport Road South',
    priority: 'critical',
    description: 'Severe road damage requires immediate attention',
  },
  {
    id: 'PH-2025-0032',
    lat: 43.7267,
    lng: -79.7534,
    detected_at: '2025-11-08T12:59:00Z',
    severity: 0.55,
    estimated_repair_cost_cad: 285,
    status: 'completed',
    source: 'iot-camera-queen-st',
    ward: 'Ward 1',
    road_name: 'Queen Street East',
    priority: 'medium',
    description: 'Repaired November 1, 2025',
  },
  {
    id: 'PH-2025-0033',
    lat: 43.6878,
    lng: -79.7689,
    detected_at: '2025-11-02T12:45:00Z',
    severity: 0.68,
    estimated_repair_cost_cad: 370,
    status: 'in_progress',
    source: 'dashcam-fleet-051',
    ward: 'Ward 7',
    road_name: 'Countryside Drive West',
    priority: 'medium',
    description: 'Pothole repair underway',
  },
  {
    id: 'PH-2025-0034',
    lat: 43.7701,
    lng: -79.7445,
    detected_at: '2025-11-11T09:46:00Z',
    severity: 0.41,
    estimated_repair_cost_cad: 195,
    status: 'new',
    source: 'iot-camera-mayfield',
    ward: 'Ward 8',
    road_name: 'Mayfield Road West',
    priority: 'low',
    description: 'Small pothole detected',
  },
  {
    id: 'PH-2025-0035',
    lat: 43.7389,
    lng: -79.7112,
    detected_at: '2025-11-02T22:43:00Z',
    severity: 0.78,
    estimated_repair_cost_cad: 465,
    status: 'scheduled',
    source: 'dashcam-fleet-076',
    ward: 'Ward 9',
    road_name: 'Torbram Road North',
    priority: 'high',
    description: 'Scheduled for repair this week',
  },
  {
    id: 'PH-2025-0036',
    lat: 43.6956,
    lng: -79.7312,
    detected_at: '2025-11-09T18:11:00Z',
    severity: 0.49,
    estimated_repair_cost_cad: 245,
    status: 'completed',
    source: 'iot-camera-clark',
    ward: 'Ward 10',
    road_name: 'Clark Boulevard East',
    priority: 'medium',
    description: 'Repaired October 28, 2025',
  },
  {
    id: 'PH-2025-0037',
    lat: 43.7534,
    lng: -79.7223,
    detected_at: '2025-11-10T11:28:00Z',
    severity: 0.85,
    estimated_repair_cost_cad: 545,
    status: 'new',
    source: 'dashcam-fleet-088',
    ward: 'Ward 5',
    road_name: 'Ray Lawson Boulevard East',
    priority: 'high',
    description: 'Large pothole near community center',
  },
  {
    id: 'PH-2025-0038',
    lat: 43.7156,
    lng: -79.7856,
    detected_at: '2025-11-06T13:09:00Z',
    severity: 0.36,
    estimated_repair_cost_cad: 175,
    status: 'in_progress',
    source: 'iot-camera-goreway',
    ward: 'Ward 6',
    road_name: 'Goreway Drive North',
    priority: 'low',
    description: 'Minor repair in progress',
  },
  {
    id: 'PH-2025-0039',
    lat: 43.6812,
    lng: -79.7478,
    detected_at: '2025-11-01T13:01:00Z',
    severity: 0.71,
    estimated_repair_cost_cad: 400,
    status: 'scheduled',
    source: 'dashcam-fleet-105',
    ward: 'Ward 7',
    road_name: 'Williams Parkway East',
    priority: 'medium',
    description: 'Pothole near library',
  },
  {
    id: 'PH-2025-0040',
    lat: 43.7645,
    lng: -79.7589,
    detected_at: '2025-11-03T18:35:00Z',
    severity: 0.94,
    estimated_repair_cost_cad: 755,
    status: 'new',
    source: 'iot-camera-castlemore',
    ward: 'Ward 8',
    road_name: 'Castlemore Road East',
    priority: 'critical',
    description: 'Emergency repair required',
  },
  {
    id: 'PH-2025-0041',
    lat: 43.7312,
    lng: -79.7623,
    detected_at: '2025-11-08T00:13:00Z',
    severity: 0.60,
    estimated_repair_cost_cad: 315,
    status: 'completed',
    source: 'dashcam-fleet-018',
    ward: 'Ward 1',
    road_name: 'Queen Street West',
    priority: 'medium',
    description: 'Repaired October 25, 2025',
  },
  {
    id: 'PH-2025-0042',
    lat: 43.7478,
    lng: -79.7334,
    detected_at: '2025-11-07T23:18:00Z',
    severity: 0.75,
    estimated_repair_cost_cad: 435,
    status: 'in_progress',
    source: 'iot-camera-main-st',
    ward: 'Ward 2',
    road_name: 'Main Street North',
    priority: 'high',
    description: 'Repair crew on site',
  },
  {
    id: 'PH-2025-0043',
    lat: 43.6889,
    lng: -79.7601,
    detected_at: '2025-11-01T12:08:00Z',
    severity: 0.43,
    estimated_repair_cost_cad: 205,
    status: 'new',
    source: 'dashcam-fleet-037',
    ward: 'Ward 3',
    road_name: 'Bovaird Drive East',
    priority: 'low',
    description: 'Minor surface wear',
  },
  {
    id: 'PH-2025-0044',
    lat: 43.7198,
    lng: -79.7423,
    detected_at: '2025-11-12T17:31:00Z',
    severity: 0.82,
    estimated_repair_cost_cad: 500,
    status: 'scheduled',
    source: 'iot-camera-kennedy-rd',
    ward: 'Ward 1',
    road_name: 'Kennedy Road South',
    priority: 'high',
    description: 'Scheduled for next maintenance cycle',
  },
  {
    id: 'PH-2025-0045',
    lat: 43.7267,
    lng: -79.7089,
    detected_at: '2025-11-12T06:45:00Z',
    severity: 0.54,
    estimated_repair_cost_cad: 275,
    status: 'completed',
    source: 'dashcam-fleet-061',
    ward: 'Ward 4',
    road_name: 'Chinguacousy Road',
    priority: 'medium',
    description: 'Repaired October 20, 2025',
  },
  {
    id: 'PH-2025-0046',
    lat: 43.7334,
    lng: -79.7578,
    detected_at: '2025-11-01T20:31:00Z',
    severity: 0.89,
    estimated_repair_cost_cad: 620,
    status: 'new',
    source: 'iot-camera-hurontario',
    ward: 'Ward 1',
    road_name: 'Hurontario Street',
    priority: 'critical',
    description: 'Major pothole affecting traffic flow',
  },
  {
    id: 'PH-2025-0047',
    lat: 43.7423,
    lng: -79.7167,
    detected_at: '2025-11-04T23:41:00Z',
    severity: 0.46,
    estimated_repair_cost_cad: 230,
    status: 'in_progress',
    source: 'dashcam-fleet-072',
    ward: 'Ward 5',
    road_name: 'McLaughlin Road',
    priority: 'low',
    description: 'Small repair underway',
  },
  {
    id: 'PH-2025-0048',
    lat: 43.7001,
    lng: -79.7489,
    detected_at: '2025-11-05T20:18:00Z',
    severity: 0.77,
    estimated_repair_cost_cad: 455,
    status: 'scheduled',
    source: 'iot-camera-steeles',
    ward: 'Ward 3',
    road_name: 'Steeles Avenue East',
    priority: 'high',
    description: 'Pothole near industrial park',
  },
  {
    id: 'PH-2025-0049',
    lat: 43.7589,
    lng: -79.7712,
    detected_at: '2025-11-10T16:24:00Z',
    severity: 0.62,
    estimated_repair_cost_cad: 330,
    status: 'completed',
    source: 'dashcam-fleet-095',
    ward: 'Ward 2',
    road_name: 'Sandalwood Parkway',
    priority: 'medium',
    description: 'Repaired October 15, 2025',
  },
  {
    id: 'PH-2025-0050',
    lat: 43.7123,
    lng: -79.7256,
    detected_at: '2025-11-01T02:09:00Z',
    severity: 0.38,
    estimated_repair_cost_cad: 180,
    status: 'new',
    source: 'iot-camera-bramalea',
    ward: 'Ward 4',
    road_name: 'Bramalea Road',
    priority: 'low',
    description: 'Small crack in pavement',
  },
  {
    id: 'PH-2025-0051',
    lat: 43.7467,
    lng: -79.7901,
    detected_at: '2025-11-10T16:39:00Z',
    severity: 0.86,
    estimated_repair_cost_cad: 565,
    status: 'in_progress',
    source: 'dashcam-fleet-033',
    ward: 'Ward 6',
    road_name: 'Airport Road',
    priority: 'high',
    description: 'Large pothole being repaired',
  },
  {
    id: 'PH-2025-0052',
    lat: 43.7201,
    lng: -79.7545,
    detected_at: '2025-11-07T01:22:00Z',
    severity: 0.51,
    estimated_repair_cost_cad: 260,
    status: 'scheduled',
    source: 'iot-camera-queen-st',
    ward: 'Ward 1',
    road_name: 'Queen Street East',
    priority: 'medium',
    description: 'Repair scheduled next month',
  },
  {
    id: 'PH-2025-0053',
    lat: 43.6834,
    lng: -79.7734,
    detected_at: '2025-11-08T14:06:00Z',
    severity: 0.93,
    estimated_repair_cost_cad: 730,
    status: 'new',
    source: 'dashcam-fleet-049',
    ward: 'Ward 7',
    road_name: 'Countryside Drive',
    priority: 'critical',
    description: 'Critical road damage detected',
  },
  {
    id: 'PH-2025-0054',
    lat: 43.7656,
    lng: -79.7401,
    detected_at: '2025-11-04T07:32:00Z',
    severity: 0.44,
    estimated_repair_cost_cad: 215,
    status: 'completed',
    source: 'iot-camera-mayfield',
    ward: 'Ward 8',
    road_name: 'Mayfield Road',
    priority: 'low',
    description: 'Repaired October 10, 2025',
  },
  {
    id: 'PH-2025-0055',
    lat: 43.7378,
    lng: -79.7134,
    detected_at: '2025-11-09T20:46:00Z',
    severity: 0.80,
    estimated_repair_cost_cad: 485,
    status: 'in_progress',
    source: 'dashcam-fleet-079',
    ward: 'Ward 9',
    road_name: 'Torbram Road',
    priority: 'high',
    description: 'Repair in progress near mall',
  },
  {
    id: 'PH-2025-0056',
    lat: 43.6934,
    lng: -79.7367,
    detected_at: '2025-11-06T17:00:00Z',
    severity: 0.48,
    estimated_repair_cost_cad: 240,
    status: 'scheduled',
    source: 'iot-camera-clark',
    ward: 'Ward 10',
    road_name: 'Clark Boulevard',
    priority: 'medium',
    description: 'Scheduled for repair',
  },
  {
    id: 'PH-2025-0057',
    lat: 43.7512,
    lng: -79.7278,
    detected_at: '2025-11-04T08:32:00Z',
    severity: 0.74,
    estimated_repair_cost_cad: 430,
    status: 'new',
    source: 'dashcam-fleet-090',
    ward: 'Ward 5',
    road_name: 'Ray Lawson Boulevard',
    priority: 'high',
    description: 'Pothole near office complex',
  },
  {
    id: 'PH-2025-0058',
    lat: 43.7089,
    lng: -79.7812,
    detected_at: '2025-11-06T18:58:00Z',
    severity: 0.40,
    estimated_repair_cost_cad: 190,
    status: 'completed',
    source: 'iot-camera-goreway',
    ward: 'Ward 6',
    road_name: 'Goreway Drive',
    priority: 'low',
    description: 'Repaired October 5, 2025',
  },
  {
    id: 'PH-2025-0059',
    lat: 43.6778,
    lng: -79.7523,
    detected_at: '2025-11-12T11:56:00Z',
    severity: 0.69,
    estimated_repair_cost_cad: 380,
    status: 'in_progress',
    source: 'dashcam-fleet-108',
    ward: 'Ward 7',
    road_name: 'Williams Parkway',
    priority: 'medium',
    description: 'Repair work ongoing',
  },
  {
    id: 'PH-2025-0060',
    lat: 43.7689,
    lng: -79.7634,
    detected_at: '2025-11-08T01:01:00Z',
    severity: 0.96,
    estimated_repair_cost_cad: 800,
    status: 'new',
    source: 'iot-camera-castlemore',
    ward: 'Ward 8',
    road_name: 'Castlemore Road',
    priority: 'critical',
    description: 'Urgent repair needed - severe damage',
  },
  {
    id: 'PH-2025-0061',
    lat: 43.7345,
    lng: -79.7456,
    detected_at: '2025-11-10T19:22:00Z',
    severity: 0.57,
    estimated_repair_cost_cad: 295,
    status: 'scheduled',
    source: 'dashcam-fleet-021',
    ward: 'Ward 1',
    road_name: 'Queen Street West',
    priority: 'medium',
    description: 'Scheduled for next week',
  },
  {
    id: 'PH-2025-0062',
    lat: 43.7501,
    lng: -79.7289,
    detected_at: '2025-11-11T16:10:00Z',
    severity: 0.72,
    estimated_repair_cost_cad: 415,
    status: 'completed',
    source: 'iot-camera-main-st',
    ward: 'Ward 2',
    road_name: 'Main Street South',
    priority: 'high',
    description: 'Repaired September 30, 2025',
  },
  {
    id: 'PH-2025-0063',
    lat: 43.6901,
    lng: -79.7567,
    detected_at: '2025-11-05T08:20:00Z',
    severity: 0.45,
    estimated_repair_cost_cad: 220,
    status: 'new',
    source: 'dashcam-fleet-044',
    ward: 'Ward 3',
    road_name: 'Bovaird Drive West',
    priority: 'low',
    description: 'Minor pothole detected',
  },
  {
    id: 'PH-2025-0064',
    lat: 43.7223,
    lng: -79.7401,
    detected_at: '2025-11-01T18:05:00Z',
    severity: 0.83,
    estimated_repair_cost_cad: 510,
    status: 'in_progress',
    source: 'iot-camera-kennedy-rd',
    ward: 'Ward 1',
    road_name: 'Kennedy Road North',
    priority: 'high',
    description: 'Repair crew working on site',
  },
  {
    id: 'PH-2025-0065',
    lat: 43.7178,
    lng: -79.7101,
    detected_at: '2025-11-08T21:09:00Z',
    severity: 0.50,
    estimated_repair_cost_cad: 255,
    status: 'scheduled',
    source: 'dashcam-fleet-065',
    ward: 'Ward 4',
    road_name: 'Chinguacousy Road North',
    priority: 'medium',
    description: 'Scheduled for repair this month',
  },
  {
    id: 'PH-2025-0066',
    lat: 43.7312,
    lng: -79.7534,
    detected_at: '2025-11-02T14:48:00Z',
    severity: 0.88,
    estimated_repair_cost_cad: 595,
    status: 'new',
    source: 'iot-camera-hurontario',
    ward: 'Ward 1',
    road_name: 'Hurontario Street North',
    priority: 'critical',
    description: 'Critical pothole near bus terminal',
  },
  {
    id: 'PH-2025-0067',
    lat: 43.7445,
    lng: -79.7189,
    detected_at: '2025-11-10T04:24:00Z',
    severity: 0.42,
    estimated_repair_cost_cad: 200,
    status: 'completed',
    source: 'dashcam-fleet-081',
    ward: 'Ward 5',
    road_name: 'McLaughlin Road South',
    priority: 'low',
    description: 'Repaired September 25, 2025',
  },
  {
    id: 'PH-2025-0068',
    lat: 43.6967,
    lng: -79.7423,
    detected_at: '2025-11-12T03:29:00Z',
    severity: 0.76,
    estimated_repair_cost_cad: 450,
    status: 'in_progress',
    source: 'iot-camera-steeles',
    ward: 'Ward 3',
    road_name: 'Steeles Avenue West',
    priority: 'high',
    description: 'Repair in progress',
  },
  {
    id: 'PH-2025-0069',
    lat: 43.7623,
    lng: -79.7689,
    detected_at: '2025-11-02T18:36:00Z',
    severity: 0.64,
    estimated_repair_cost_cad: 345,
    status: 'scheduled',
    source: 'dashcam-fleet-097',
    ward: 'Ward 2',
    road_name: 'Sandalwood Parkway East',
    priority: 'medium',
    description: 'Repair scheduled',
  },
  {
    id: 'PH-2025-0070',
    lat: 43.7056,
    lng: -79.7312,
    detected_at: '2025-11-05T14:14:00Z',
    severity: 0.37,
    estimated_repair_cost_cad: 175,
    status: 'new',
    source: 'iot-camera-bramalea',
    ward: 'Ward 4',
    road_name: 'Bramalea Road South',
    priority: 'low',
    description: 'Small surface defect',
  },
  {
    id: 'PH-2025-0071',
    lat: 43.7489,
    lng: -79.7867,
    detected_at: '2025-11-10T00:57:00Z',
    severity: 0.91,
    estimated_repair_cost_cad: 680,
    status: 'completed',
    source: 'dashcam-fleet-031',
    ward: 'Ward 6',
    road_name: 'Airport Road South',
    priority: 'critical',
    description: 'Repaired September 20, 2025',
  },
  {
    id: 'PH-2025-0072',
    lat: 43.7234,
    lng: -79.7589,
    detected_at: '2025-11-07T06:00:00Z',
    severity: 0.53,
    estimated_repair_cost_cad: 270,
    status: 'in_progress',
    source: 'iot-camera-queen-st',
    ward: 'Ward 1',
    road_name: 'Queen Street East',
    priority: 'medium',
    description: 'Repair work underway',
  },
  {
    id: 'PH-2025-0073',
    lat: 43.6856,
    lng: -79.7701,
    detected_at: '2025-11-09T10:08:00Z',
    severity: 0.70,
    estimated_repair_cost_cad: 390,
    status: 'scheduled',
    source: 'dashcam-fleet-053',
    ward: 'Ward 7',
    road_name: 'Countryside Drive West',
    priority: 'medium',
    description: 'Scheduled for repair',
  },
  {
    id: 'PH-2025-0074',
    lat: 43.7712,
    lng: -79.7423,
    detected_at: '2025-11-02T12:26:00Z',
    severity: 0.46,
    estimated_repair_cost_cad: 225,
    status: 'new',
    source: 'iot-camera-mayfield',
    ward: 'Ward 8',
    road_name: 'Mayfield Road West',
    priority: 'low',
    description: 'Minor road defect',
  },
  {
    id: 'PH-2025-0075',
    lat: 43.7401,
    lng: -79.7078,
    detected_at: '2025-11-02T23:31:00Z',
    severity: 0.79,
    estimated_repair_cost_cad: 470,
    status: 'completed',
    source: 'dashcam-fleet-077',
    ward: 'Ward 9',
    road_name: 'Torbram Road North',
    priority: 'high',
    description: 'Repaired September 15, 2025',
  },
  {
    id: 'PH-2025-0076',
    lat: 43.6978,
    lng: -79.7334,
    detected_at: '2025-11-03T09:32:00Z',
    severity: 0.61,
    estimated_repair_cost_cad: 320,
    status: 'in_progress',
    source: 'iot-camera-clark',
    ward: 'Ward 10',
    road_name: 'Clark Boulevard East',
    priority: 'medium',
    description: 'Repair in progress',
  },
  {
    id: 'PH-2025-0077',
    lat: 43.7545,
    lng: -79.7245,
    detected_at: '2025-11-03T21:44:00Z',
    severity: 0.84,
    estimated_repair_cost_cad: 530,
    status: 'scheduled',
    source: 'dashcam-fleet-092',
    ward: 'Ward 5',
    road_name: 'Ray Lawson Boulevard East',
    priority: 'high',
    description: 'High priority repair scheduled',
  },
  {
    id: 'PH-2025-0078',
    lat: 43.7134,
    lng: -79.7845,
    detected_at: '2025-11-06T17:30:00Z',
    severity: 0.39,
    estimated_repair_cost_cad: 185,
    status: 'new',
    source: 'iot-camera-goreway',
    ward: 'Ward 6',
    road_name: 'Goreway Drive North',
    priority: 'low',
    description: 'Small pothole detected',
  },
  {
    id: 'PH-2025-0079',
    lat: 43.6823,
    lng: -79.7489,
    detected_at: '2025-11-03T19:51:00Z',
    severity: 0.73,
    estimated_repair_cost_cad: 425,
    status: 'completed',
    source: 'dashcam-fleet-106',
    ward: 'Ward 7',
    road_name: 'Williams Parkway East',
    priority: 'high',
    description: 'Repaired September 10, 2025',
  },
  {
    id: 'PH-2025-0080',
    lat: 43.7667,
    lng: -79.7601,
    detected_at: '2025-11-01T15:06:00Z',
    severity: 0.95,
    estimated_repair_cost_cad: 770,
    status: 'in_progress',
    source: 'iot-camera-castlemore',
    ward: 'Ward 8',
    road_name: 'Castlemore Road East',
    priority: 'critical',
    description: 'Critical repair in progress',
  },
  {
    id: 'PH-2025-0081',
    lat: 43.7278,
    lng: -79.7445,
    detected_at: '2025-11-04T21:29:00Z',
    severity: 0.56,
    estimated_repair_cost_cad: 290,
    status: 'scheduled',
    source: 'dashcam-fleet-019',
    ward: 'Ward 1',
    road_name: 'Queen Street West',
    priority: 'medium',
    description: 'Repair scheduled next week',
  },
  {
    id: 'PH-2025-0082',
    lat: 43.7467,
    lng: -79.7301,
    detected_at: '2025-11-03T01:46:00Z',
    severity: 0.68,
    estimated_repair_cost_cad: 365,
    status: 'new',
    source: 'iot-camera-main-st',
    ward: 'Ward 2',
    road_name: 'Main Street North',
    priority: 'medium',
    description: 'Pothole near shopping area',
  },
  {
    id: 'PH-2025-0083',
    lat: 43.6923,
    lng: -79.7545,
    detected_at: '2025-11-02T00:46:00Z',
    severity: 0.41,
    estimated_repair_cost_cad: 195,
    status: 'completed',
    source: 'dashcam-fleet-040',
    ward: 'Ward 3',
    road_name: 'Bovaird Drive East',
    priority: 'low',
    description: 'Repaired September 5, 2025',
  },
  {
    id: 'PH-2025-0084',
    lat: 43.7189,
    lng: -79.7412,
    detected_at: '2025-11-02T14:12:00Z',
    severity: 0.81,
    estimated_repair_cost_cad: 495,
    status: 'in_progress',
    source: 'iot-camera-kennedy-rd',
    ward: 'Ward 1',
    road_name: 'Kennedy Road South',
    priority: 'high',
    description: 'Repair crew on site',
  },
  {
    id: 'PH-2025-0085',
    lat: 43.7212,
    lng: -79.7145,
    detected_at: '2025-11-12T21:31:00Z',
    severity: 0.47,
    estimated_repair_cost_cad: 235,
    status: 'scheduled',
    source: 'dashcam-fleet-063',
    ward: 'Ward 4',
    road_name: 'Chinguacousy Road',
    priority: 'low',
    description: 'Scheduled for repair',
  },
  {
    id: 'PH-2025-0086',
    lat: 43.7356,
    lng: -79.7512,
    detected_at: '2025-11-03T09:01:00Z',
    severity: 0.87,
    estimated_repair_cost_cad: 575,
    status: 'new',
    source: 'iot-camera-hurontario',
    ward: 'Ward 1',
    road_name: 'Hurontario Street',
    priority: 'critical',
    description: 'Critical pothole requiring immediate attention',
  },
  {
    id: 'PH-2025-0087',
    lat: 43.7478,
    lng: -79.7178,
    detected_at: '2025-11-12T07:17:00Z',
    severity: 0.52,
    estimated_repair_cost_cad: 265,
    status: 'completed',
    source: 'dashcam-fleet-084',
    ward: 'Ward 5',
    road_name: 'McLaughlin Road',
    priority: 'medium',
    description: 'Repaired September 1, 2025',
  },
  {
    id: 'PH-2025-0088',
    lat: 43.6989,
    lng: -79.7456,
    detected_at: '2025-11-05T11:42:00Z',
    severity: 0.75,
    estimated_repair_cost_cad: 440,
    status: 'in_progress',
    source: 'iot-camera-steeles',
    ward: 'Ward 3',
    road_name: 'Steeles Avenue East',
    priority: 'high',
    description: 'Repair work ongoing',
  },
  {
    id: 'PH-2025-0089',
    lat: 43.7601,
    lng: -79.7656,
    detected_at: '2025-11-11T07:34:00Z',
    severity: 0.63,
    estimated_repair_cost_cad: 335,
    status: 'scheduled',
    source: 'dashcam-fleet-096',
    ward: 'Ward 2',
    road_name: 'Sandalwood Parkway',
    priority: 'medium',
    description: 'Repair scheduled',
  },
  {
    id: 'PH-2025-0090',
    lat: 43.7089,
    lng: -79.7278,
    detected_at: '2025-11-01T23:59:00Z',
    severity: 0.35,
    estimated_repair_cost_cad: 170,
    status: 'new',
    source: 'iot-camera-bramalea',
    ward: 'Ward 4',
    road_name: 'Bramalea Road',
    priority: 'low',
    description: 'Minor surface issue',
  },
  {
    id: 'PH-2025-0091',
    lat: 43.7512,
    lng: -79.7823,
    detected_at: '2025-11-06T03:12:00Z',
    severity: 0.90,
    estimated_repair_cost_cad: 650,
    status: 'completed',
    source: 'dashcam-fleet-028',
    ward: 'Ward 6',
    road_name: 'Airport Road',
    priority: 'critical',
    description: 'Repaired August 30, 2025',
  },
  {
    id: 'PH-2025-0092',
    lat: 43.7245,
    lng: -79.7567,
    detected_at: '2025-11-02T13:21:00Z',
    severity: 0.59,
    estimated_repair_cost_cad: 305,
    status: 'in_progress',
    source: 'iot-camera-queen-st',
    ward: 'Ward 1',
    road_name: 'Queen Street East',
    priority: 'medium',
    description: 'Repair underway',
  },
  {
    id: 'PH-2025-0093',
    lat: 43.6867,
    lng: -79.7678,
    detected_at: '2025-11-09T04:33:00Z',
    severity: 0.71,
    estimated_repair_cost_cad: 395,
    status: 'scheduled',
    source: 'dashcam-fleet-050',
    ward: 'Ward 7',
    road_name: 'Countryside Drive',
    priority: 'medium',
    description: 'Scheduled for next maintenance',
  },
  {
    id: 'PH-2025-0094',
    lat: 43.7689,
    lng: -79.7467,
    detected_at: '2025-11-10T06:29:00Z',
    severity: 0.43,
    estimated_repair_cost_cad: 210,
    status: 'new',
    source: 'iot-camera-mayfield',
    ward: 'Ward 8',
    road_name: 'Mayfield Road',
    priority: 'low',
    description: 'Small pothole detected',
  },
  {
    id: 'PH-2025-0095',
    lat: 43.7423,
    lng: -79.7089,
    detected_at: '2025-11-10T18:28:00Z',
    severity: 0.78,
    estimated_repair_cost_cad: 460,
    status: 'completed',
    source: 'dashcam-fleet-075',
    ward: 'Ward 9',
    road_name: 'Torbram Road',
    priority: 'high',
    description: 'Repaired August 28, 2025',
  },
  {
    id: 'PH-2025-0096',
    lat: 43.6945,
    lng: -79.7389,
    detected_at: '2025-11-11T06:50:00Z',
    severity: 0.54,
    estimated_repair_cost_cad: 280,
    status: 'in_progress',
    source: 'iot-camera-clark',
    ward: 'Ward 10',
    road_name: 'Clark Boulevard',
    priority: 'medium',
    description: 'Repair in progress',
  },
  {
    id: 'PH-2025-0097',
    lat: 43.7523,
    lng: -79.7234,
    detected_at: '2025-11-01T14:01:00Z',
    severity: 0.86,
    estimated_repair_cost_cad: 555,
    status: 'scheduled',
    source: 'dashcam-fleet-089',
    ward: 'Ward 5',
    road_name: 'Ray Lawson Boulevard',
    priority: 'high',
    description: 'High priority repair scheduled',
  },
  {
    id: 'PH-2025-0098',
    lat: 43.7167,
    lng: -79.7834,
    detected_at: '2025-11-09T01:46:00Z',
    severity: 0.38,
    estimated_repair_cost_cad: 180,
    status: 'new',
    source: 'iot-camera-goreway',
    ward: 'Ward 6',
    road_name: 'Goreway Drive',
    priority: 'low',
    description: 'Minor pothole detected',
  },
  {
    id: 'PH-2025-0099',
    lat: 43.6801,
    lng: -79.7512,
    detected_at: '2025-11-12T04:25:00Z',
    severity: 0.67,
    estimated_repair_cost_cad: 360,
    status: 'completed',
    source: 'dashcam-fleet-107',
    ward: 'Ward 7',
    road_name: 'Williams Parkway',
    priority: 'medium',
    description: 'Repaired August 25, 2025',
  },
  {
    id: 'PH-2025-0100',
    lat: 43.7734,
    lng: -79.7578,
    detected_at: '2025-11-03T17:46:00Z',
    severity: 0.97,
    estimated_repair_cost_cad: 820,
    status: 'new',
    source: 'iot-camera-castlemore',
    ward: 'Ward 8',
    road_name: 'Castlemore Road',
    priority: 'critical',
    description: 'Severe road damage - emergency repair required',
  },
];

export const potholeService = {
  async getPotholes(): Promise<Pothole[]> {
    if (!API_BASE_URL) {
      // Return demo data if no API configured
      return Promise.resolve(DEMO_POTHOLES);
    }

    try {
      const response = await apiClient.get<Pothole[]>('/potholes');
      return response.data;
    } catch (error) {
      console.warn('API unavailable, using demo data');
      return DEMO_POTHOLES;
    }
  },

  async getPotholeById(id: string): Promise<Pothole | null> {
    if (!API_BASE_URL) {
      return DEMO_POTHOLES.find((p) => p.id === id) || null;
    }

    try {
      const response = await apiClient.get<Pothole>(`/potholes/${id}`);
      return response.data;
    } catch (error) {
      return DEMO_POTHOLES.find((p) => p.id === id) || null;
    }
  },

  async getStats(): Promise<Stats> {
    if (!API_BASE_URL) {
      const stats: Stats = {
        total_detections: DEMO_POTHOLES.length,
        new: DEMO_POTHOLES.filter((p) => p.status === 'new').length,
        in_progress: DEMO_POTHOLES.filter((p) => p.status === 'in_progress').length,
        completed: DEMO_POTHOLES.filter((p) => p.status === 'completed').length,
        scheduled: DEMO_POTHOLES.filter((p) => p.status === 'scheduled').length,
        average_severity: DEMO_POTHOLES.reduce((sum, p) => sum + p.severity, 0) / DEMO_POTHOLES.length,
        estimated_total_cost_cad: DEMO_POTHOLES.reduce((sum, p) => sum + p.estimated_repair_cost_cad, 0),
        high_priority_count: DEMO_POTHOLES.filter((p) => p.priority === 'high' || p.priority === 'critical').length,
      };
      return Promise.resolve(stats);
    }

    try {
      const response = await apiClient.get<Stats>('/stats');
      return response.data;
    } catch (error) {
      throw new Error('Failed to fetch statistics');
    }
  },
};
